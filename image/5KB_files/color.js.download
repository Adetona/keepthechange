function hexToR(a){return parseInt(cutHex(a).substring(0,2),16)}function hexToG(a){return parseInt(cutHex(a).substring(2,4),16)}function hexToB(a){return parseInt(cutHex(a).substring(4,6),16)}function cutHex(a){return"#"==a.charAt(0)?a.substring(1,7):a}function stringToRgba(a){if(a){if(a.indexOf("rgba")>=0){a=a.match(/^rgba\((\d+),\s*(\d+),\s*(\d+),\s*(\d*\.*\d+)\)$/);var b={r:parseInt(a[1]),g:parseInt(a[2]),b:parseInt(a[3]),a:parseFloat(a[4])}}else if("transparent"==a)var b={r:255,g:255,b:255,a:0};else b=stringToRgb(a),b.a=1;return b}}function stringToRgb(a){if(a=a.match(/^rgb\((\d+),\s*(\d+),\s*(\d+)\)$/))var b={r:parseInt(a[1]),g:parseInt(a[2]),b:parseInt(a[3])};else var b={r:255,g:255,b:255};return b}Color=function(a,b){var c=this;if(c.position=0,c.color=a,c.color){if(0==c.color.indexOf("#"))4==a.length&&(c.color="#"+c.color.substring(1,2)+c.color.substring(1,2)+c.color.substring(2,3)+c.color.substring(2,3)+c.color.substring(3,4)+c.color.substring(3,4)),c.color=b?"rgba("+hexToR(c.color)+","+hexToG(c.color)+","+hexToB(c.color)+","+b+")":"rgba("+hexToR(c.color)+","+hexToG(c.color)+","+hexToB(c.color)+",1)";else if(0==c.color.indexOf("rgb")){var d=stringToRgba(c.color);void 0!=b&&(d.a=b),c.color="rgba("+d.r+","+d.g+","+d.b+","+d.a+")"}}else c.color=void 0},comparecolor=function(a,b){return a.position<b.position?-1:a.position>b.position?1:a.position==b.position?a.color<b.color?-1:1:void 0};